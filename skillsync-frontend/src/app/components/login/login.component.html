<div class="login-container">
  <mat-card>
    <mat-card-title>{{ 'LOGIN.TITLE' | translate }}</mat-card-title>
    <mat-card-content>
      <form [formGroup]="loginForm" (ngSubmit)="login()">
        <mat-form-field appearance="fill">
          <mat-label for="email">{{ 'LOGIN.EMAIL' | translate }}</mat-label>
          <input matInput id="email" formControlName="email" required type="email" autocomplete="email">
          <mat-error *ngIf="loginForm.get('email')?.hasError('required')">{{ 'LOGIN.EMAIL' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}</mat-error>
          <mat-error *ngIf="loginForm.get('email')?.hasError('email')">{{ 'LOGIN.INVALID_EMAIL' | translate }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label for="password">{{ 'LOGIN.PASSWORD' | translate }}</mat-label>
          <input matInput id="password" type="password" formControlName="password" required autocomplete="current-password">
          <mat-error *ngIf="loginForm.get('password')?.hasError('required')">{{ 'LOGIN.PASSWORD' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}</mat-error>
          <mat-error *ngIf="loginForm.get('password')?.hasError('minlength')">{{ 'LOGIN.PASSWORD_LENGTH' | translate }}</mat-error>
        </mat-form-field>

        <mat-checkbox formControlName="rememberMe">
          {{ 'LOGIN.REMEMBER_ME' | translate }}
        </mat-checkbox>

        <button mat-raised-button color="primary" type="submit" [disabled]="loginForm.invalid || isLoading">
          <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
          <span *ngIf="!isLoading">{{ 'LOGIN.SUBMIT' | translate }}</span>
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</div>

<div *ngIf="showTwoFactorForm" aria-live="polite">
  <form [formGroup]="twoFactorForm" (ngSubmit)="verifyTwoFactor()">
    <mat-form-field appearance="fill">
      <mat-label for="twoFactorCode">{{ 'LOGIN.VERIFICATION_CODE' | translate }}</mat-label>
      <input matInput id="twoFactorCode" formControlName="code" required autocomplete="one-time-code">
      <mat-error *ngIf="twoFactorForm.get('code')?.hasError('required')">{{ 'LOGIN.VERIFICATION_CODE_REQUIRED' | translate }}</mat-error>
      <mat-error *ngIf="twoFactorForm.get('code')?.hasError('minlength') || twoFactorForm.get('code')?.hasError('maxlength')">
        {{ 'LOGIN.VERIFICATION_CODE_LENGTH' | translate }}
      </mat-error>
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit" [disabled]="twoFactorForm.invalid || isLoading">
      <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
      <span *ngIf="!isLoading">{{ 'LOGIN.VERIFY' | translate }}</span>
    </button>
  </form>
</div>

<div class="social-login">
  <button mat-raised-button color="primary" (click)="googleLogin()">
    <mat-icon svgIcon="google-logo"></mat-icon>
    {{ 'LOGIN.GOOGLE_SIGN_IN' | translate }}
  </button>
  <button mat-raised-button color="primary" (click)="facebookLogin()">
    <mat-icon svgIcon="facebook-logo"></mat-icon>
    {{ 'LOGIN.FACEBOOK_SIGN_IN' | translate }}
  </button>
</div>
